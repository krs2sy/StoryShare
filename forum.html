<!DOCTYPE html>
<html lang="en">
 <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">  <!-- required to handle IE -->

    <meta name="viewport" content="width=device-width, initial-scale=1">


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
     <link rel="stylesheet" href="styles/main.css">
    <!-- required scripts for IE -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <title>Story Share</title>

  </head>
<body>

    <script src="navbar.js"></script>

    <h2>Forums</h2>

    <section class="new_post">
        <h3>New Post</h3>
        <form id = "new_post" action="forum.html">
            <label>Title: </label>
            <input type="text" id="title" autofocus required onblur="checkTitle()" />
            <div id="title-msg" class="feedback"></div>
            <br/>
            <label>Description: </label>
            â€‹<textarea id="textArea" rows="8" cols="70"></textarea>
            <br/>
            <label>Story: </label>
            <select id="selectStory">
                <option value="New Story">New Story</option>
                <option value = "Synergy">Synergy</option>
                <option value="Data Shield">Data Shield</option>
            </select>
            <input style = "float: right" type="button" value="Post" onclick="addPost()" />   <!-- use input type="submit" with the required attribute -->
        </form>

    </section>
    <section class="new_post">
        <h3>Posts</h3>
         <label>Options: </label>
        <select>
            <option value="allPosts">All Posts</option>
            <option value="myPosts">My Posts</option>
        </select>

        <div class="group">
            <div class="post_left">
                <p style="font-size: 18px">Which character should star next?</p>
                <p style="color: blue"><i>Synergy</i></p>
            </div>
            <div class="post_right">
                Updated: 01/08/18
                <br/>
                <p>8 comments</p>
            </div>
        </div>

        <div class="group">
            <div class="post_left">
                <p style="font-size: 18px">Resources for Space Travel?</p>
                <p>New Story</p>
            </div>
            <div class="post_right">
                Updated: 01/01/18
                <br/>
                <p>3 comments</p>
            </div>
        </div>

        <div id="content" class="feedback"></div>

        <script>

           function checkTitle() {
              var msg = document.getElementById("title-msg");
              var title = document.getElementById("title");
              if (title.value.length < 2 && title.value.length > 0)
                 msg.textContent = "Title is too short";
              else
                 msg.textContent = "";
           }

          function addPost() {
              var title = document.getElementById("title").value;
              if (title.length > 1) {
                  var story = document.getElementById("selectStory").value
                  var numComments = 0;
                  var date = new Date();
                  var today = (date.getMonth()+1) + "/" + date.getDate() + "/" + date.getFullYear();

                  var storyHTML;

                  if(story == "New Story") {
                    storyHTML = '>' + story;
                  }
                  else {
                    storyHTML = 'style="color: blue"><i>' + story + '</i>';
                  }

                  //Code based on https://stackoverflow.com/questions/16467536/put-a-javascript-variable-into-a-innerhtml-code
                  var div = document.createElement('div');

                  div.className = 'group';

                  div.innerHTML =
                        '<div class="post_left">\
                            <p style="font-size: 18px">' + title + '</p>\
                            <p' + storyHTML + '</p>\
                        </div>\
                        <div class="post_right">\
                            Updated: ' + today + '\
                            <br/>\
                            <p>' + numComments + ' comments</p>\
                        </div>';

                  document.getElementById('content').appendChild(div);

              }
              else {
                document.getElementById("title-msg").innerHTML = "Title is too short";
              }


            }

          </script>

    </section>

    <script src="footer.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- <script src="js/bootstrap.min.js"></script> -->

</body>
</html>